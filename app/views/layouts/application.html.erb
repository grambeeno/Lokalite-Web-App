<!doctype html>  

<% 
  content = Map.new

  content.main = raw content_for(:main)
  content.aside = raw content_for(:aside)

  content.main = yield if content.main.blank?
  content.aside = false if content.aside.blank?
%>

  <!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ --> 
  <!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
  <!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
  <!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
  <!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
  <!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->

  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame 
         Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title><%= title %></title>
    <meta name="description" content="<%= title %>">
    <meta name="author" content="lokalite.com">

    <!--  Mobile viewport optimized: j.mp/bplateviewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Place favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <%= render :partial => 'shared/stylesheets' %>
    <%= render :partial => 'shared/javascripts' %>
    <%= csrf_meta_tag %>

    <!--[if !IE 7]> <style type="text/css"> #wrap {display:table;height:100%} </style> <![endif]-->

  </head>

  <body<% if content.aside %> class="has-sidebar"<% end %>>
    <div id="wrap" class="full-width">

      <%= render :partial => 'shared/header' %>
      <%= render :partial => 'shared/toolbar' %>

      <div id="main" class="full-width">
        <% if content.aside %>
            <div id="sidebar" class="fixed-left">
              <%= search_form %>
              <%= content.aside %>
            </div>
        <% end %>

        <div id="content" class="<% if content.aside %>fluid-right<% else %>full-width<% end %>">
          <%= render :partial => 'shared/flash' %>

          <%= content.main %>
        </div><!-- end content -->
      </div><!-- end main -->

    </div><!-- end wrap -->

    <footer id="page-bottom" class="container span-24 last block">
      <%= render :partial => 'shared/footer' %>
    </footer>

    <%= render :partial => 'shared/google_analytics' %>

  </body>
</html>
