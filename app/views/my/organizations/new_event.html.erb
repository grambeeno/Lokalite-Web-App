<%
  accept = raw(ImageUploader.accepts.join(', '))
  organization = @result.data.organization
%>

<%= form do %>
  <% context "Create A New Event For #{ organization.name.inspect }" %>

  <%= @result.errors %>

  <fieldset>	
    <h1> Create Event</h1>
    <span class='hint'>future: Have you created this event before dropdown?</span>
    <%= @result.form.select(:category, :options => Category.options_for_select) %>
    <br />
    <%= @result.form.label(:name, :content => 'Name of Event') %> <span class='hint'></span>
    <br />
    <%= @result.form.input(:name, :class => :focus, :autofocus => 'autofocus') %>
    <br />
    <br />


    <%= @result.form.label(:starts_at, :content => 'Start Time') %> <span class='hint'></span>
    <br />
    <%= @result.form.input(:starts_at, :date, :class => 'date') %> @ <%= @result.form.input(:starts_at, :time, :class => 'time') %>
    
    <div class="end-time">
    <%= @result.form.label(:ends_at, :content => 'End Time') %> <span class='hint'></span>
    <br />
    <%= @result.form.input(:ends_at, :date, :class => 'date') %> @ <%= @result.form.input(:ends_at, :time, :class => 'time') %>
    </div>
    
    <%= @result.form.label(:category, :content => 'Primary Category') %> <span class='hint'></span>
    <br />
    <%= @result.form.select(:category, :options => Category.options_for_select) %>
    <br />
    <%= @result.form.label(:category, :content => 'Secondary Category') %><span class='hint'></span>
    <br />
    <%= @result.form.select(:category, :options => Category.options_for_select) %>
    <br />
    <br />

    <%= @result.form.label(:all_day, :content => 'All day?') %> <span class='hint'></span>
    <br />
    <%= @result.form.input(:all_day, :type => :checkbox) %>
    <br />
    <br />

    <%= @result.form.label(:repeats, :content => 'Repeat (Does your event repeat? If so, let us known when.)') %><span class='hint'></span>
    <br />
      <blockquote style='margin-top:0.2em;'>
      <!--
        <%= @result.form.input(:repeats, :type => :checkbox, :value => :monthly) %>
        <em style='color:#333;'>monthy?</em>
        <br />
      -->

        <%= @result.form.input(:repeats, :type => :checkbox, :value => :daily) %>
        <em style='color:#333;'>daily?</em>
        <br />

        <%= @result.form.input(:repeats, :type => :checkbox, :value => :weekdays) %>
        <em style='color:#333;'>weekdays?</em>
        <br />

        <%= @result.form.input(:repeats, :type => :checkbox, :value => :weekends) %>
        <em style='color:#333;'>weekends?</em>
        <br />

        <%= @result.form.input(:repeats, :type => :checkbox, :value => :weekly) %>
        <em style='color:#333;'>weekly?</em>
        <br />
      </blockquote>
    <div class="description-field">  
    <%= @result.form.label(:description, :content => 'Description')  %><span class='hint'></span>
    <br />
    <%= @result.form.textarea(:description) %>
    <br />
    <br />
    </div>
    <br />
    
    <div class="image-field"> 
    <%= @result.form.label(:image) %> &mdash; <span class='hint'>a square picture. 300x300px is best!</span>
    <br />
    <%= @result.form.input(:image, :type => :file, :accept => accept) %>
    <br />
    <br />
    
    <%= @image_cache %>
    <% if url = @image_cache.url %>
      <br /> <label>Uploaded: <%= raw(@image_cache.basename.inspect) %></label> <br />
      <img src='<%= raw(url) %>' alt='<%= raw(url) %>' style='max-width:300px; max-height:300px' /> <br />
    <% end %>
    </div>
  </fieldset>

<hr id="line" />

  <fieldset>
    <span class='form-titles'>Choose the Venue where your event will be held</span>
    
    <br />
    <br />
    <%= @result.form.label(:name, :content => 'Pick an Existing Venue for your Event:') %> <span class='hint'></span>
    <%= @result.form.select(:venue, :id, :options => Venue.options_for_select(:organization => @organization_id)) %>
    <br />

    <span class='form-titles'>Or create a new one: (If your event's not held at your location, nor a peviously added Venue)</span>
    <br />
    <%= @result.form.label(:venue, :name, :content => 'Name of Venue') %>
    <br />
    <%= @result.form.input(:venue, :name) %>
    <br />

    <%= @result.form.label(:venue, :name, :content => 'Street Address') %>
    <%= @result.form.input(:type => :checkbox) %>
    <em style='color:#333;'>It's at a Campus Address</em>
    <br />
    <%= @result.form.input(:venue, :address) %>
    <br />

    <%= @result.form.label(:venue, :url, :content => 'Website') %>
    <br />
    <%= @result.form.input(:venue, :url) %>
    <br />

    <%= @result.form.label(:venue, :phone, :content => 'Website') %>
    <br />
    <%= @result.form.input(:venue, :phone) %>
    <br />

    <%= @result.form.label(:venue, :email, :content => 'Email') %>
    <br />
    <%= @result.form.input(:venue, :email) %>

   </fieldset>

  <%= submit_tag('Save') %>
<% end %>
